cat > web/index.html << 'HTMLEOF'
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EgoBot Reason</title>
  <style>
    :root{--bg:#0f1117;--surface:#1a1d27;--border:#2a2d3a;--text:#e0e0e8;--dim:#8888a0;--accent:#76b900}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
    header{background:var(--surface);border-bottom:1px solid var(--border);padding:1rem 2rem}
    header h1{font-size:1.4rem} header h1 span{color:var(--accent)} header p{color:var(--dim);font-size:.85rem}
    .container{max-width:1100px;margin:2rem auto;padding:0 1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:1.5rem}
    .card h2{font-size:1rem;margin-bottom:1rem;color:var(--accent)}
    .upload{border:2px dashed var(--border);border-radius:8px;padding:2rem;text-align:center;cursor:pointer}
    .upload:hover{border-color:var(--accent)} .upload.has-img{padding:0;border-style:solid;border-color:var(--accent)}
    .upload img{max-width:100%;max-height:300px;border-radius:6px} .upload p{color:var(--dim);font-size:.85rem;margin-top:.5rem}
    input[type=file]{display:none}
    .modes{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;margin-bottom:1rem}
    .mbtn{background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:.5rem;color:var(--text);cursor:pointer;font-size:.8rem}
    .mbtn:hover{border-color:var(--accent)} .mbtn.on{background:var(--accent);color:#000;font-weight:600}
    .go{width:100%;padding:.75rem;background:var(--accent);color:#000;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}
    .go:disabled{background:var(--border);color:var(--dim);cursor:not-allowed}
    .rbox{background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:1rem;font-family:monospace;font-size:.8rem;white-space:pre-wrap;max-height:300px;overflow-y:auto;margin-top:.5rem}
    .rh{font-size:.85rem;color:var(--dim);margin-top:1rem}
    .spin{display:inline-block;width:18px;height:18px;border:2px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:s .6s linear infinite;vertical-align:middle;margin-right:.5rem}
    @keyframes s{to{transform:rotate(360deg)}}
    .status{margin-top:.75rem;font-size:.8rem;color:var(--dim)}
    @media(max-width:768px){.container{grid-template-columns:1fr}.modes{grid-template-columns:repeat(2,1fr)}}
  </style>
</head>
<body>
<header><div><h1>ğŸ¤– <span>EgoBot</span> Reason</h1><p>Egocentric Robot Reasoning â€” NVIDIA Cosmos Reason 2</p></div></header>
<div class="container">
  <div class="card">
    <h2>ğŸ“· Input</h2>
    <div class="upload" id="up" onclick="document.getElementById('fi').click()"><p>ğŸ“‚ Click to upload image</p><p>JPG, PNG</p></div>
    <input type="file" id="fi" accept="image/*">
    <div style="margin-top:1rem"><h2>ğŸ§  Mode</h2>
      <div class="modes" id="mg">
        <button class="mbtn on" data-m="social">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Social</button>
        <button class="mbtn" data-m="handover">ğŸ¤² Handover</button>
        <button class="mbtn" data-m="spatial">ğŸ“ Spatial</button>
        <button class="mbtn" data-m="safety">âš ï¸ Safety</button>
        <button class="mbtn" data-m="planning">ğŸ¯ Planning</button>
        <button class="mbtn" data-m="full">ğŸ” Full</button>
      </div>
    </div>
    <button class="go" id="go" disabled>Analyze</button>
    <div class="status" id="st"></div>
  </div>
  <div class="card">
    <h2>ğŸ“Š Results</h2>
    <p class="rh">ğŸ’­ Reasoning</p><div class="rbox" id="r1">Waiting...</div>
    <p class="rh">ğŸ“‹ Output</p><div class="rbox" id="r2">â€”</div>
    <p class="rh">âš™ï¸ Tokens</p><div class="rbox" id="r3" style="max-height:50px">â€”</div>
  </div>
</div>
<script>
let file=null,mode='social';
document.getElementById('fi').onchange=e=>{
  file=e.target.files[0];if(!file)return;
  const r=new FileReader();r.onload=ev=>{
    const u=document.getElementById('up');u.innerHTML='<img src="'+ev.target.result+'">';u.classList.add('has-img');
  };r.readAsDataURL(file);document.getElementById('go').disabled=false;
};
document.getElementById('mg').onclick=e=>{
  const b=e.target.closest('.mbtn');if(!b)return;
  document.querySelectorAll('.mbtn').forEach(x=>x.classList.remove('on'));b.classList.add('on');mode=b.dataset.m;
};
document.getElementById('go').onclick=async()=>{
  if(!file)return;const go=document.getElementById('go');go.disabled=true;
  document.getElementById('st').innerHTML='<span class="spin"></span> Analyzing...';
  document.getElementById('r1').textContent='Processing...';
  document.getElementById('r2').textContent='...';
  const fd=new FormData();fd.append('image',file);fd.append('mode',mode);
  try{
    const res=await fetch('/api/analyze',{method:'POST',body:fd});const d=await res.json();
    if(d.error){document.getElementById('st').textContent='Error: '+d.error;go.disabled=false;return;}
    const reason=d.reasoning||(d.results?Object.entries(d.results).map(([k,v])=>'-- '+k.toUpperCase()+' --\n'+(v.reasoning||'')).join('\n\n'):'');
    document.getElementById('r1').textContent=reason||'(none)';
    const out=d.parsed?JSON.stringify(d.parsed,null,2):(d.results?JSON.stringify(Object.fromEntries(Object.entries(d.results).map(([k,v])=>[k,v.parsed])),null,2):d.answer||'(none)');
    document.getElementById('r2').textContent=out;
    const u=d.usage||{};document.getElementById('r3').textContent='Prompt: '+(u.prompt_tokens||'?')+' | Completion: '+(u.completion_tokens||'?')+' | Total: '+(u.total_tokens||'?');
    document.getElementById('st').textContent='Done';
  }catch(err){document.getElementById('st').textContent='Failed: '+err.message;}
  go.disabled=false;
};
</script>
</body>
</html>
HTMLEOF